<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
	<link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <title> CineVortex </title>
</head>

<body>
    <div id="root">
        <!-- HEADER -->
        <div class="heading">
            
            <div class="header-left">
                <!-- Menu Icon -->
            <div class="menu-toggle" id="menu-toggle">
                <span class="material-symbols-outlined">menu</span>
            </div>

            <h1 class="logo">Cine<span>Vortex</span></h1>

                <!-- Home Icon -->
            <div class="home-container">
            <a href="project.html" class="home-icon" title="Go to Home">
                <span class="material-symbols-outlined">home</span>
            </a>
            </div>
            </div>
            <!-- Search Bar -->
            <div class="search-container">
                <div class="search">
                    <span class="search-icon material-symbols-outlined">search</span>
                    <input class="search-input" type="search" placeholder="Search">
                </div>
            </div>

            <!-- Profile -->
            <div class="profile"> 
                <img id="profile-img" src="https://cdn-icons-png.flaticon.com/512/6522/6522516.png">
                <div id="dropdown" class="dropdown-menu">
                    <ul>
                        <li onclick="location.href='profile.html'">Profile</li>
                        <li onclick="location.href='settings.html'">Settings</li>
                        <li onclick="location.href='login.html'">Login</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- SIDEBAR -->
        <div class="side" id="sidebar">
            <a href="watchlist.html"><div class="p1">Watchlist</div></a>
            <hr>
            <a href="tracker.html"><div class="p1">Tracker</div></a>
            <hr>
            <a href="surprise.html"><div class="p1">Surprise Me</div></a>
            <hr>
            <a href="community.html"><div class="p1">Community</div></a>

        </div>
        
        <!-- DARK OVERLAY -->
        <div class="overlay" id="overlay"></div>

        <!-- MAIN CONTENT -->
        <div class="container">
          <div class="profile-box">
            <h2>Welcome To Your Profile</h2>
            <div class="profile-container">
            <div class="profile-header">
            <div class="profile-pic" id="profile-pic" style="background-image: url('https://cdn-icons-png.flaticon.com/512/3106/3106807.png');"></div>
            <div class="profile-info">
             <h3 id="profile-name">Username</h3>
             <p id="profile-email">user123@example.com</p>
            </div>
        </div>

        <div class="profile-details">
            <label for="user-name">Name:</label>
         <textarea id="user-name" rows="1" placeholder="Your Name"></textarea>

        <label for="user-bio">Bio:</label>
         <textarea id="user-bio" rows="3" placeholder="Tell us something about yourself..."></textarea>

         <label>Date of Birth:</label>
        <div class="dob-container" id="dob-fields">
        <select id="dob-day" disabled>
            <option value="dob-day">Day</option>
        </select>
        <select id="dob-month" disabled>
            <option value="">Month</option>
        </select>
        <select id="dob-year" disabled>
            <option value="">Year</option>
        </select>
        </div>

         <label for="user-genres">Favorite Genres:</label>
         <input type="text" id="user-genres" placeholder="e.g., Action, Sci-Fi, Comedy">
        </div>

        <div class="profile-buttons">
        <button id="edit-profile-btn">Edit Profile</button>
        <button id="save-profile-btn" style="display: none;">Save Changes</button>
        <button id="logout-btn">Log Out</button>
        </div>
        </div>
        </div>
        </div>

        
        <script src="script.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
        // Elements
        const profileNameDisplay = document.getElementById('profile-name');
        const profileEmailDisplay = document.getElementById('profile-email');
        const userNameInput = document.getElementById('user-name');
        const userBioInput = document.getElementById('user-bio');
        const userGenresInput = document.getElementById('user-genres');

        const editBtn = document.getElementById('edit-profile-btn');
        const saveBtn = document.getElementById('save-profile-btn');
        const logoutBtn = document.getElementById('logout-btn');

        // Load data from localStorage and fill fields
        function loadProfile() {
            const username = localStorage.getItem('username') || 'Username';
            const email = localStorage.getItem('email') || 'user@example.com';
            const name = localStorage.getItem('fullName') || '';

            profileNameDisplay.textContent = username;
            profileEmailDisplay.textContent = email;
            userNameInput.value = name;

            // Optional: Load bio and genres if stored previously
            userBioInput.value = localStorage.getItem('userBio') || '';
            userGenresInput.value = localStorage.getItem('userGenres') || '';

            // Disable inputs by default
            userNameInput.disabled = true;
            userBioInput.disabled = true;
            userGenresInput.disabled = true;
        }

        loadProfile();

        const daySelect = document.getElementById("dob-day");
        const monthSelect = document.getElementById("dob-month");
        const yearSelect = document.getElementById("dob-year");

        for (let i = 1; i <= 31; i++) {
        const option = document.createElement("option");
        option.value = i;
        option.textContent = i;
        daySelect.appendChild(option);
        }

        const months = [
        "January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"
        ];

        months.forEach((month, index) => {
        const option = document.createElement("option");
        option.value = index + 1;
        option.textContent = month;
        monthSelect.appendChild(option);
        });

        const currentYear = new Date().getFullYear();
        for (let y = currentYear; y >= 1900; y--) {
        const option = document.createElement("option");
        option.value = y;
        option.textContent = y;
        yearSelect.appendChild(option);
        }

        // Enable editing
        editBtn.addEventListener('click', () => {
            userNameInput.disabled = false;
            userBioInput.disabled = false;
            userGenresInput.disabled = false;
            daySelect.disabled = false;
            monthSelect.disabled = false;
            yearSelect.disabled = false;

            editBtn.style.display = 'none';
            saveBtn.style.display = 'inline-block';
        });

        // Save changes
        saveBtn.addEventListener('click', () => {
            const newName = userNameInput.value.trim();
            const newBio = userBioInput.value.trim();
            const newGenres = userGenresInput.value.trim();

            if (newName) {
            localStorage.setItem('fullName', newName);
            profileNameDisplay.textContent = newName;
            }

            localStorage.setItem('userBio', newBio);
            localStorage.setItem('userGenres', newGenres);
            localStorage.setItem('dobDay', daySelect.value);
            localStorage.setItem('dobMonth', monthSelect.value);
            localStorage.setItem('dobYear', yearSelect.value);

            userNameInput.disabled = true;
            userBioInput.disabled = true;
            userGenresInput.disabled = true;
            daySelect.disabled = true;
            monthSelect.disabled = true;
            yearSelect.disabled = true;

            saveBtn.style.display = 'none';
            editBtn.style.display = 'inline-block';

            alert('Profile updated successfully!');
        });
        // Log out
        logoutBtn.addEventListener('click', () => {
            // Clear user-related localStorage items
            localStorage.removeItem('username');
            localStorage.removeItem('email');
            localStorage.removeItem('fullName');
            localStorage.removeItem('userBio');
            localStorage.removeItem('userGenres');
            localStorage.removeItem('dobDay');
            localStorage.removeItem('dobMonth');
            localStorage.removeItem('dobYear');


            // Redirect to login page
            window.location.href = 'login.html';
        });
        });

    </script>
    <footer>
        <p>Contact Us</p>
    </footer>
</div>
</body>
</html>